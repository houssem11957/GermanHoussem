<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Essay Notepad â€” Wide Editor</title>

  <!-- Ubuntu font (fallback to Liberation Sans / system sans) -->
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #f8fafc;
      --card: #ffffff;
      --muted: #6b7280;
      --accent: #2563eb;
      --accent-2: #10b981;
      --line: #e6eefb;
      --glass: rgba(37,99,235,0.06);
      --radius:12px;
      --shadow-sm: 0 4px 10px rgba(0,0,0,0.05);
      --shadow-lg: 0 8px 20px rgba(0,0,0,0.10);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      padding:36px;
      background: linear-gradient(160deg,var(--bg),#eef2ff 60%);
      font-family: "Ubuntu", "Liberation Sans", Arial, sans-serif;
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Container - wide */
    .container{
      max-width:100%;         /* wide */
      margin:0 auto;
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    header{
      display:flex;
      align-items:center;
      gap:16px;
    }
    .logo{
      width:56px;
      height:56px;
      border-radius:12px;
      background:var(--glass);
      display:grid;
      place-items:center;
      color:var(--accent);
      font-weight:700;
      font-size:20px;
      box-shadow: var(--shadow-sm), inset 0 -6px 12px rgba(255,255,255,0.5);
    }
    h1{
      margin:0;
      font-size:20px;
      letter-spacing:-0.2px;
    }
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}

    /* Editor card */
    .editor-card{
      background:var(--card);
      border-radius:var(--radius);
      padding:16px;
      box-shadow: var(--shadow-sm);
      border:1px solid var(--line);
      transition: transform .15s ease, box-shadow .15s ease;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .editor-card:hover{ transform: translateY(-3px); box-shadow: var(--shadow-lg); }

    /* Toolbar */
    .toolbar{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .title-input{
      flex:1 1 420px;
      min-width:220px;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #eef2ff;
      background: linear-gradient(180deg,#fff,#fbfdff);
      font-size:16px;
      font-weight:600;
      color:#0b1220;
      outline:none;
      box-shadow: inset 0 -6px 12px rgba(0,0,0,0.02);
    }
    .btn{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:8px 12px;
      border-radius:10px;
      border:1px solid #e6eefb;
      background:#fff;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
      color:#0b1220;
      transition: transform .12s ease, box-shadow .12s ease;
      box-shadow: 0 2px 6px rgba(11,17,32,0.03);
    }
    .btn:hover{ transform: translateY(-3px); box-shadow: 0 8px 18px rgba(11,17,32,0.06); }
    .btn.positive{ color: white; background: linear-gradient(90deg,var(--accent), #60a5fa); border: none; box-shadow:none; }
    .btn.ghost{ background: transparent; border:1px dashed #e9eefc; color:var(--muted); }

    .small{
      padding:6px 10px;
      font-size:13px;
      border-radius:8px;
    }

    /* Editor area - large textarea styled as paper */
    .editor-area{
      display:flex;
      gap:16px;
      align-items:flex-start;
    }

    textarea#essay{
      width:100%;
      min-height:480px;
      height:calc(100vh - 360px); /* make tall but keep within viewport */
      resize:vertical;
      padding:28px 32px;
      border-radius:12px;
      border:1px solid var(--line);
      box-shadow: 0 6px 18px rgba(8,15,52,0.04), inset 0 -10px 20px rgba(0,0,0,0.02);
      font-family: "Ubuntu", "Liberation Sans", Arial, sans-serif;
      font-size:16px;
      line-height:1.6;
      color:#0b1220;
      background: linear-gradient(180deg,#ffffff,#fbfdff);
      outline:none;
    }

    /* Side column with quick notes / word count */
    .side{
      width:260px;
      min-width:200px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .card-side{
      background:#fff;
      border-radius:10px;
      padding:12px;
      border:1px solid var(--line);
      box-shadow: 0 4px 12px rgba(8,15,52,0.03);
      font-size:14px;
      color:var(--muted);
    }
    .stat{
      display:flex;
      justify-content:space-between;
      margin-bottom:6px;
      font-weight:700;
      color:#0b1220;
      font-size:14px;
    }

    /* Footer actions */
    .footer-actions{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-top:6px;
    }
    .hint{ color:var(--muted); font-size:13px }

    /* Responsive */
    @media (max-width:980px){
      .container{padding:16px}
      .editor-area{flex-direction:column}
      .side{width:100%}
      textarea#essay{height:420px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">NP</div>
      <div>
        <h1>Essay Notepad</h1>
        <p class="lead">Write your essay in a wide, elegant editor (Ubuntu / LibreOffice-friendly font).</p>
      </div>
    </header>

    <main class="editor-card" role="application" aria-label="Essay Notepad">
      <!-- toolbar -->
      <div class="toolbar" role="toolbar" aria-label="Editor toolbar">
        <input id="title" class="title-input" placeholder="Essay title (click to edit)" value="My Essay Title" aria-label="Essay title" />

        <button class="btn small" id="btn-bold" title="Bold (wrap selection with **)" onclick="wrapSelection('**')">Bold</button>
        <button class="btn small" id="btn-italic" title="Italic (wrap selection with *)" onclick="wrapSelection('*')">Italic</button>

        <button class="btn small" id="btn-font-sm" title="Smaller font" onclick="changeFontSize(-1)">A-</button>
        <button class="btn small" id="btn-font-lg" title="Larger font" onclick="changeFontSize(1)">A+</button>

        <button class="btn small ghost" id="btn-download" title="Download as .txt" onclick="downloadTxt()">Download</button>
        <button class="btn small positive" id="btn-save" title="Save to browser (localStorage)" onclick="saveDraft()">Save</button>
        <button class="btn small" id="btn-clear" title="Clear" onclick="clearEditor()">Clear</button>
      </div>

      <!-- editor & side -->
      <div class="editor-area">
        <textarea id="essay" placeholder="Start writing your essay here..."></textarea>

        <aside class="side" aria-label="Sidebar">
          <div class="card-side">
            <div style="font-weight:700;margin-bottom:6px">Stats</div>
            <div class="stat"><span>Words</span><span id="wordCount">0</span></div>
            <div class="stat"><span>Characters</span><span id="charCount">0</span></div>
            <div class="stat"><span>Lines</span><span id="lineCount">0</span></div>
          </div>

          <div class="card-side">
            <div style="font-weight:700;margin-bottom:6px">Quick notes</div>
            <div style="font-size:14px;color:var(--muted)">
              - Use <strong>A+</strong>/<strong>A-</strong> to adjust font size.<br>
              - Click <strong>Save</strong> to keep in browser localStorage.<br>
              - Use <strong>Download</strong> to export as .txt file.<br>
              - Autosaves every 20s (toggle below).
            </div>
          </div>

          <div class="card-side" style="display:flex;gap:8px;align-items:center;justify-content:space-between">
            <div style="font-weight:700">Autosave</div>
            <label style="display:inline-flex;align-items:center;gap:8px;">
              <input type="checkbox" id="autosaveToggle" checked />
              <span style="font-size:13px;color:var(--muted)">On</span>
            </label>
          </div>
        </aside>
      </div>

      <!-- footer -->
      <div class="footer-actions">
        <div class="hint">Tip: Press <kbd>Ctrl/Cmd + S</kbd> to save locally. Press <kbd>Ctrl/Cmd + D</kbd> to download.</div>
        <div style="display:flex;gap:8px">
          <button class="btn ghost" onclick="loadDraft()">Load Draft</button>
          <button class="btn" onclick="clearLocal()">Delete Saved</button>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Elements
    const essay = document.getElementById('essay');
    const wordCountEl = document.getElementById('wordCount');
    const charCountEl = document.getElementById('charCount');
    const lineCountEl = document.getElementById('lineCount');
    const autosaveToggle = document.getElementById('autosaveToggle');
    const titleInput = document.getElementById('title');

    const STORAGE_KEY = 'essay_notepad_draft_v1';

    // Init content from localStorage if present
    function loadDraft(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return;
        const obj = JSON.parse(raw);
        essay.value = obj.text || '';
        titleInput.value = obj.title || titleInput.value;
        updateStats();
      } catch(e){ console.warn('Load failed', e); }
    }

    function saveDraft(){
      const obj = { title: titleInput.value, text: essay.value, savedAt: new Date().toISOString() };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
      flashBtn('btn-save');
    }

    function clearLocal(){
      localStorage.removeItem(STORAGE_KEY);
      flashBtn('btn-clear');
      updateStats();
    }

    // Autosave every 20s if enabled
    setInterval(()=> {
      if(autosaveToggle.checked) saveDraft();
    }, 20000);

    // Stats update
    function updateStats(){
      const text = essay.value;
      const words = text.trim().length === 0 ? 0 : text.trim().split(/\s+/).length;
      const chars = text.length;
      const lines = text.split(/\r\n|\r|\n/).length;
      wordCountEl.textContent = words;
      charCountEl.textContent = chars;
      lineCountEl.textContent = lines;
    }
    essay.addEventListener('input', updateStats);

    // Download as text file
    function downloadTxt(){
      const title = (titleInput.value || 'essay').replace(/[^\w\- ]/g,'').trim() || 'essay';
      const blob = new Blob([essay.value], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = title + '.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
      flashBtn('btn-download');
    }

    // Clear editor
    function clearEditor(){
      if(!confirm('Clear editor content?')) return;
      essay.value = '';
      updateStats();
    }

    // Wrap selection with marker (simple)
    function wrapSelection(mark){
      const s = essay.selectionStart;
      const e = essay.selectionEnd;
      const val = essay.value;
      const selected = val.slice(s, e);
      const before = val.slice(0, s);
      const after = val.slice(e);
      essay.value = before + mark + selected + mark + after;
      essay.focus();
      // restore selection to inside markers if selection was empty
      if(s === e){
        const pos = s + mark.length;
        essay.setSelectionRange(pos, pos);
      } else {
        essay.setSelectionRange(s + mark.length, e + mark.length);
      }
      updateStats();
    }

    // Adjust font size
    function changeFontSize(delta){
      const style = window.getComputedStyle(essay);
      const cur = parseFloat(style.fontSize) || 16;
      const next = Math.max(12, Math.min(26, cur + delta));
      essay.style.fontSize = next + 'px';
    }

    // Flash button (visual feedback)
    function flashBtn(id){
      const btn = document.getElementById(id);
      if(!btn) return;
      const original = btn.style.transform;
      btn.style.transform = 'scale(0.98)';
      setTimeout(()=> btn.style.transform = original, 160);
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', (e)=>{
      const meta = navigator.platform.includes('Mac') ? e.metaKey : e.ctrlKey;
      if(meta && e.key.toLowerCase() === 's'){ // save
        e.preventDefault();
        saveDraft();
      }
      if(meta && e.key.toLowerCase() === 'd'){ // download
        e.preventDefault();
        downloadTxt();
      }
    });

    // Initialize
    updateStats();
    loadDraft();

    // expose some functions for inline buttons (accessibility)
    window.saveDraft = saveDraft;
    window.downloadTxt = downloadTxt;
    window.clearEditor = clearEditor;
    window.loadDraft = loadDraft;
    window.clearLocal = clearLocal;
    window.wrapSelection = wrapSelection;
    window.changeFontSize = changeFontSize;
  </script>
</body>
</html>
